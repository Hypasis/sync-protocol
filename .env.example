# Hypasis Sync Protocol - Environment Variables
# Copy this file to .env and fill in your values

# ============================================================================
# INSTANCE CONFIGURATION
# ============================================================================

# Unique identifier for this instance (hypasis-sync-1, hypasis-sync-2, etc.)
INSTANCE_ID=hypasis-sync-1

# AWS region or datacenter location
REGION=us-east-1

# External/Public IP address (use "auto" for auto-detection)
EXTERNAL_IP=auto

# ============================================================================
# ETHEREUM L1 (Required for Polygon checkpoints)
# ============================================================================

# Ethereum mainnet RPC URL - Get from Alchemy or Infura
# Example: https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
ETH_L1_RPC_URL=

# ============================================================================
# POLYGON RPC (Required for block fetching)
# ============================================================================

# Primary Polygon RPC endpoint
# Example: https://polygon-mainnet.g.alchemy.com/v2/YOUR_API_KEY
POLYGON_RPC_1=

# Fallback Polygon RPC endpoint
POLYGON_RPC_2=https://polygon-rpc.com

# ============================================================================
# REDIS (Required for cluster coordination and caching)
# ============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis password (use strong random password in production!)
REDIS_PASSWORD=change-this-password

# Redis database number for cluster coordination
REDIS_DB=0

# ============================================================================
# SECURITY
# ============================================================================

# JWT secret for API authentication (generate with: openssl rand -base64 32)
JWT_SECRET=change-this-secret

# Grafana admin password
GRAFANA_PASSWORD=admin

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Maximum number of Bor nodes that can connect (per instance)
MAX_PEERS=500

# Maximum simultaneous connections in connection pool
MAX_CONNECTIONS=500

# Rate limit per node operator (requests per second)
PER_OPERATOR_RPS=100

# Global rate limit for entire instance (requests per second)
GLOBAL_RPS=50000

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable distributed cache (Redis)
ENABLE_CACHE=true

# Enable cluster coordination (for multi-instance deployment)
ENABLE_CLUSTER=true

# Enable DevP2P bootnode mode
ENABLE_DEVP2P=true

# Disable rate limiting (not recommended for production)
# DISABLE_RATE_LIMIT=false

# ============================================================================
# LOGGING
# ============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# ============================================================================
# MONITORING
# ============================================================================

# Enable Prometheus metrics
ENABLE_METRICS=true

# Enable health checks
ENABLE_HEALTH_CHECKS=true

# ============================================================================
# ADVANCED SETTINGS (Optional)
# ============================================================================

# DevP2P listen address
# DEVP2P_LISTEN=0.0.0.0:30303

# RPC listen address
# RPC_LISTEN=0.0.0.0:8545

# API listen address
# API_LISTEN=0.0.0.0:8080

# Metrics listen address
# METRICS_LISTEN=0.0.0.0:9090

# Data directory
# DATA_DIR=/data/hypasis

# ============================================================================
# NOTES
# ============================================================================

# Production Checklist:
# [ ] Set unique INSTANCE_ID for each instance
# [ ] Configure ETH_L1_RPC_URL with your API key
# [ ] Configure POLYGON_RPC_1 with your API key
# [ ] Set strong REDIS_PASSWORD
# [ ] Generate secure JWT_SECRET
# [ ] Set appropriate MAX_PEERS based on instance resources
# [ ] Enable all security features
# [ ] Configure monitoring and alerting
# [ ] Set up SSL certificates
# [ ] Configure firewall rules
# [ ] Test failover scenarios

# Getting API Keys:
# - Alchemy: https://www.alchemy.com/ (recommended)
# - Infura: https://infura.io/
# - QuickNode: https://www.quicknode.com/

# Generate Secure Secrets:
# JWT_SECRET:     openssl rand -base64 32
# REDIS_PASSWORD: openssl rand -base64 32
